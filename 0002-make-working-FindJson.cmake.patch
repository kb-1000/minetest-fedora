From e80cf3151638df348c12775f0297da617b9411a5 Mon Sep 17 00:00:00 2001
From: Igor Gnatenko <i.gnatenko.brain@gmail.com>
Date: Fri, 11 Oct 2013 03:29:03 +0400
Subject: [PATCH 2/2] make working FindJson.cmake

Signed-off-by: Igor Gnatenko <i.gnatenko.brain@gmail.com>
---
 cmake/Modules/FindJson.cmake | 23 +++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)

diff --git a/cmake/Modules/FindJson.cmake b/cmake/Modules/FindJson.cmake
index a9178a2..399b2eb 100644
--- a/cmake/Modules/FindJson.cmake
+++ b/cmake/Modules/FindJson.cmake
@@ -1,18 +1,21 @@
 # Look for json, use our own if not found
 
-#FIND_PATH(JSON_INCLUDE_DIR json.h)
+FIND_PATH(JSON_INCLUDE_DIR json/features.h
+					PATH_SUFFIXES jsoncpp)
 
-#FIND_LIBRARY(JSON_LIBRARY NAMES jsoncpp)
+FIND_LIBRARY(JSON_LIBRARY NAMES jsoncpp)
+MESSAGE(STATUS "dir: ${JSON_INCLUDE_DIR}")
+MESSAGE(STATUS "lib: ${JSON_LIBRARY}")
 
-#IF(JSON_LIBRARY AND JSON_INCLUDE_DIR)
-#	SET( JSON_FOUND TRUE )
-#ENDIF(JSON_LIBRARY AND JSON_INCLUDE_DIR)
+IF(JSON_LIBRARY AND JSON_INCLUDE_DIR)
+	SET(JSON_FOUND TRUE)
+ENDIF(JSON_LIBRARY AND JSON_INCLUDE_DIR)
 
-#IF(JSON_FOUND)
-#	MESSAGE(STATUS "Found system jsoncpp header file in ${JSON_INCLUDE_DIR}")
-#	MESSAGE(STATUS "Found system jsoncpp library ${JSON_LIBRARY}")
-#ELSE(JSON_FOUND)
+IF(JSON_FOUND)
+	MESSAGE(STATUS "Found system jsoncpp header file in ${JSON_INCLUDE_DIR}")
+	MESSAGE(STATUS "Found system jsoncpp library ${JSON_LIBRARY}")
+ELSE(JSON_FOUND)
 	SET(JSON_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/json)
 	SET(JSON_LIBRARY jsoncpp)
 	MESSAGE(STATUS "Using project jsoncpp library")
-#ENDIF(JSON_FOUND)
+ENDIF(JSON_FOUND)
-- 
1.8.3.1

